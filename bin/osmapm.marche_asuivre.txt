. oggenv -p ALLBIRDS -e RCT -c DB
ggsci obey  /home/oracle/admin/goldengate/admin/livraison/scripts_prm_sql/allbirds.add_trandata.obey


STOP PROCESS


. oraenv<<EOF
ALLBIRDS
EOF

# pour vérfier si ok on simule la tache:
make SID=ALLBIRDS -f maj_structure.allbirds.osmapm.makefile -n

#lancement
make SID=ALLBIRDS -f maj_structure.allbirds.osmapm.makefile  -j 4

# apres maj structure, on genere les sql pour initload
./etape -s ALLBIRDS -f deploie.gen_init.sql -u OGGADM -p 'OSMAPM'



#ajout pour l'extraction des tables
cat allbirds.osmapm.extr.*.prm >> /ogg/dirprm/Db.Allbirds/ALLBIRDS/SOURCE/OSMAPM/EABAPMS1.prm

# REPLICAT: génération des fichiers pour chaque tables : 
rm rm ALLBIRDS.deploie.gen_repli.ok
./etape -s ALLBIRDS -f deploie.gen_repli.sql -u OGGADM -p 'OSMAPM'

echo "" > allbirds.osmapm.replication.prm
for fic in $(ls allbirds.osmapm.repl.*.prm |sort)
do 
cat $fic >> allbirds.osmapm.replication.prm
echo "-- ------------------------------------" >> allbirds.osmapm.replication.prm
echo "-- ------------------------------------" >> allbirds.osmapm.replication.prm
done

#AVANT DE FAIRE CETTE MANIP recuperer le parametrage de RAB001T1.prm
cp allbirds.osmapm.replication.prm /ogg/dirprm/Db.Allbirds/ALLBIRDS/STAGING/OSMAPM/RABAPMT1.prm

./allbirds.osmapm.initial_load.sh